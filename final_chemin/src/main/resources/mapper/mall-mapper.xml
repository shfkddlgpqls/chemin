<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="mall">

	<resultMap type="map" id="mallMap"></resultMap>
	
	<!-- 전체 상품 리스트 -->
	<select id="selectMallList" resultMap="mallMap">
		select * from product 
		order by sales desc
	</select>
	
	<select id="selectProductCount" resultType="_int">
		select count(*) from product
	</select>
	
	<!-- 카테고리별 상품 리스트 -->
	<select id="selectCateList" parameterType="map" resultType="product">
		select * from product 
		where 1=1
		<if test="ctype!=null and ctype!=''">
			and cno=#{cno}
		</if>
		<if test="searchData!=null and searchData!=''">
			and pname like '%'||#{searchData}||'%'
		</if>
		<if test="lowValue!=null and lowValue!=''">
			and price <![CDATA[>=]]> #{lowValue}
		</if>
		<if test="highValue!=null and highValue!=''">
			and price <![CDATA[<=]]> #{highValue}
		</if>
		<if test="stype_h!=null and stype_h!=''">
			order by sales desc
		</if>
		<if test="stype_n!=null and stype_n!=''">
			order by pdate desc
		</if>
		<if test="stype_lv!=null and stype_lv!=''">
			order by price
		</if>
		<if test="stype_hv!=null and stype_hv!=''">
			order by price desc
		</if>
	</select>

</mapper>
